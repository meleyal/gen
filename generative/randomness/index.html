<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">Randomness | Generative Music with JavaScript</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://meleyal.github.io/generative-music-with-javascript/generative/randomness"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Randomness | Generative Music with JavaScript"><meta data-react-helmet="true" name="description" content="Randomness is a first step to generating music. With it we can generate whole"><meta data-react-helmet="true" property="og:description" content="Randomness is a first step to generating music. With it we can generate whole"><link data-react-helmet="true" rel="icon" href="/generative-music-with-javascript/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://meleyal.github.io/generative-music-with-javascript/generative/randomness"><link data-react-helmet="true" rel="alternate" href="https://meleyal.github.io/generative-music-with-javascript/generative/randomness" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://meleyal.github.io/generative-music-with-javascript/generative/randomness" hreflang="x-default"><link rel="stylesheet" href="/generative-music-with-javascript/assets/css/styles.24e738a7.css">
<link rel="preload" href="/generative-music-with-javascript/assets/js/runtime~main.83b3d8a9.js" as="script">
<link rel="preload" href="/generative-music-with-javascript/assets/js/main.08b23e21.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/generative-music-with-javascript/"><b class="navbar__title">Generative Music with JavaScript</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/meleyal/generative-music-with-javascript" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Welcome</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/introduction">Introduction</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Primers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/primers/generative">Generative</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/primers/music">Music</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/primers/javascript">JavaScript</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Music</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/music/notes">Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/music/timing">Timing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/music/rhythm">Rhythm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/music/melody">Melody</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/music/harmony">Harmony</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active menuLinkText_QVir" aria-current="page">Generative</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/repetition">Repetition</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/generative-music-with-javascript/generative/randomness">Randomness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/probability">Probability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/grammars">Grammars</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/recursion">Recursion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/evolution">Evolution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/machine-learning">Machine Learning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/generative/sonification">Sonification</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Examples</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/examples/canon">Canon</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menuLinkText_QVir">Course</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/generative-music-with-javascript/course/outline">Course Outline</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Randomness</h1></header><p>Randomness is a first step to generating music. With it we can generate whole
pieces of music, introduce variation and surprise. Knowing how to harness
randomness is an interplay between us and the computer. If we think of all
posibilities, randomness gives us a way to &quot;sample&quot; the possibility space /
unseen.</p><blockquote><p>Music that relies at least to some degree on randomness is said to be
stochastic, or aleatoric.</p></blockquote><p>This guide shows how to use randomness to introduce variation to our music,
specifically through the idea of a random walk.</p><p>Notes:</p><ul><li>Pure randomness (seeds)</li><li>Range</li><li>Perlin, Gaussian</li><li>Random number generation</li><li>Apply to: pitch, velocity, timing</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="random-walk">Random Walk<a class="hash-link" href="#random-walk" title="Direct link to heading">​</a></h2><p>In 2D graphics, a random walk involves drawing a path by repeatedly choosing a
random direction in which to move. On this 2D plane, each step can be one of
four directions: up, down, left, or right (plus a fifth choice if you include
not moving as an option). Given a certain set of rules, this might look as
follows:</p><p><img src="data:image/png;base64,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" width="1266" height="709"></p><p>How might we apply this idea to music? As we&#x27;ve seen, a piano has 88 keys,
giving it a range from A0 to C8, which map to the MIDI numbers 21–108. We can
treat this as a 1D plane, and say that at each moment we have 4 choices: 1) play
a higher note; 2) play a min note; 3) play the same note; 4) play nothing. The
range 21-108 and the 4 choices define the &quot;possibility space&quot; for our random
walk.</p><p><img src="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjE4IDU0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Im0wIDBoMjE4djU0aC0yMTh6IiBmaWxsPSIjZmZmIi8+PGcgc3Ryb2tlPSIjMTExIiBzdHJva2Utd2lkdGg9Ii4xMjUiPjxwYXRoIGQ9Im01IDVoNHYzMGgtNHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtOSA1aDR2MzBoLTR6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTggNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxnIGZpbGw9IiNmZmYiPjxwYXRoIGQ9Im0xMyA1aDR2MzBoLTR6Ii8+PHBhdGggZD0ibTE3IDVoNHYzMGgtNHoiLz48cGF0aCBkPSJtMjEgNWg0djMwaC00eiIvPjxwYXRoIGQ9Im0yNSA1aDR2MzBoLTR6Ii8+PHBhdGggZD0ibTI5IDVoNHYzMGgtNHoiLz48cGF0aCBkPSJtMzMgNWg0djMwaC00eiIvPjxwYXRoIGQ9Im0zNyA1aDR2MzBoLTR6Ii8+PC9nPjxwYXRoIGQ9Im0xNiA1aDJ2MjBoLTJ6IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0ibTIwIDVoMnYyMGgtMnoiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJtMjggNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0zMiA1aDJ2MjBoLTJ6IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0ibTM2IDVoMnYyMGgtMnoiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJtNDEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im00NSA1aDR2MzBoLTR6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTQ5IDVoNHYzMGgtNHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtNTMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im01NyA1aDR2MzBoLTR6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTYxIDVoNHYzMGgtNHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtNjUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im00NCA1aDJ2MjBoLTJ6IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0ibTQ4IDVoMnYyMGgtMnoiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJtNTYgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im02MCA1aDJ2MjBoLTJ6IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0ibTY0IDVoMnYyMGgtMnoiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJtNjkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im03MyA1aDR2MzBoLTR6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTc3IDVoNHYzMGgtNHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtODEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im04NSA1aDR2MzBoLTR6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0ibTg5IDVoNHYzMGgtNHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJtOTMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im03MiA1aDJ2MjBoLTJ6IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0ibTc2IDVoMnYyMGgtMnoiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJtODQgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im04OCA1aDJ2MjBoLTJ6IiBmaWxsPSIjMDAwIi8+PHBhdGggZD0ibTkyIDVoMnYyMGgtMnoiIGZpbGw9IiMwMDAiLz48cGF0aCBkPSJtOTcgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMDEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMDUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMDkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMTMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMTcgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMjEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMDAgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xMDQgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xMTIgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xMTYgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xMjAgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xMjUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMjkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMzMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMzcgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNDEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNDUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNDkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xMjggNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xMzIgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNDAgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNDQgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNDggNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNTMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNTcgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNjEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNjUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNjkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNzMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNzcgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xNTYgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNjAgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNjggNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNzIgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xNzYgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xODEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xODUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xODkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xOTMgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xOTcgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMDEgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0yMDUgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0xODQgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xODggNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0xOTYgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0yMDAgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0yMDQgNWgydjIwaC0yeiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Im0yMDkgNWg0djMwaC00eiIgZmlsbD0iI2ZmZiIvPjwvZz48cGF0aCBkPSJtNS41IDQzLjVoMjA3IiBzdHJva2U9IiNkOGQ1ZDkiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS13aWR0aD0iLjUiLz48cGF0aCBkPSJtOTYgMzloMjd2OWgtMjd6IiBmaWxsPSIjZmZmIi8+PGcgZmlsbD0iIzAwMCI+PHBhdGggZD0ibTEwMy4zMDUgNDUuMDYyNWMuNjc3IDAgMS4xNDItLjMzNTkgMS4xNDItLjgyNDIgMC0uMzcxMS0uMjY3LS42NTgyLS42NjItLjcyNDZ2LS4wMTE3Yy4zMjgtLjA3ODIuNTQ3LS4zMzAxLjU0Ny0uNjM2OCAwLS40MzM2LS40MjItLjc0NjEtMS4wMjctLjc0NjEtLjYwNCAwLTEuMDMuMzE0NS0xLjAzLjc0NDIgMCAuMzEwNS4yMjEuNTYyNS41NDkuNjM4N3YuMDExN2MtLjM5Mi4wNjQ0LS42NjIuMzUxNS0uNjYyLjcyMjYgMCAuNDg4My40NTkuODI2MiAxLjE0My44MjYyem0wLS40Mjk3Yy0uMzExIDAtLjUyOC0uMTg1NS0uNTI4LS40Mzk0cy4yMTctLjQzOTUuNTI4LS40Mzk1Yy4zMSAwIC41MjUuMTg1Ni41MjUuNDM5NXMtLjIxNS40Mzk0LS41MjUuNDM5NHptMC0xLjMwODZjLS4yNjIgMC0uNDQ2LS4xNjQtLjQ0Ni0uMzg4NyAwLS4yMjQ2LjE4NC0uMzkwNi40NDYtLjM5MDYuMjU5IDAgLjQ0NS4xNjQxLjQ0NS4zOTA2IDAgLjIyNDctLjE4Ni4zODg3LS40NDUuMzg4N3ptMi42MTcgMS43MzgzYy42NzggMCAxLjE0My0uMzM1OSAxLjE0My0uODI0MiAwLS4zNzExLS4yNjgtLjY1ODItLjY2Mi0uNzI0NnYtLjAxMTdjLjMyOC0uMDc4Mi41NDctLjMzMDEuNTQ3LS42MzY4IDAtLjQzMzYtLjQyMi0uNzQ2MS0xLjAyOC0uNzQ2MS0uNjAzIDAtMS4wMjkuMzE0NS0xLjAyOS43NDQyIDAgLjMxMDUuMjIxLjU2MjUuNTQ5LjYzODd2LjAxMTdjLS4zOTMuMDY0NC0uNjYyLjM1MTUtLjY2Mi43MjI2IDAgLjQ4ODMuNDU5LjgyNjIgMS4xNDIuODI2MnptMC0uNDI5N2MtLjMxIDAtLjUyNy0uMTg1NS0uNTI3LS40Mzk0cy4yMTctLjQzOTUuNTI3LS40Mzk1Yy4zMTEgMCAuNTI2LjE4NTYuNTI2LjQzOTVzLS4yMTUuNDM5NC0uNTI2LjQzOTR6bTAtMS4zMDg2Yy0uMjYxIDAtLjQ0NS0uMTY0LS40NDUtLjM4ODcgMC0uMjI0Ni4xODQtLjM5MDYuNDQ1LS4zOTA2LjI2IDAgLjQ0Ni4xNjQxLjQ0Ni4zOTA2IDAgLjIyNDctLjE4Ni4zODg3LS40NDYuMzg4N3ptMi44OTIuNDIxOWgtLjAwOHYtMS41NjQ1aC0uNTd2Mi44MTg0aC41N3YtLjY5MTRsLjE0OS0uMTYwMi41OTkuODUxNmguNjU3bC0uODM4LTEuMTk1My43OTgtLjg5ODVoLS42NDZ6bTIuNDExLS40NjI5Yy4yNTQgMCAuNDI3LjE4MzYuNDM5LjQ1MTJoLS44ODhjLjAxOS0uMjYxNy4xOTktLjQ1MTIuNDQ5LS40NTEyem0uNDQ3IDEuMDc2MmMtLjA1My4xNjAxLS4yMTMuMjYzNi0uNDIyLjI2MzYtLjI5MSAwLS40OC0uMjA1LS40OC0uNTAzOXYtLjAzNTFoMS40NDN2LS4xNzM4YzAtLjYzNjgtLjM4NS0xLjA0ODktLjk5NC0xLjA0ODktLjYxOSAwLTEuMDEuNDMzNi0xLjAxIDEuMTAxNiAwIC42Njk5LjM4NyAxLjA4MiAxLjAzMSAxLjA4Mi41MTggMCAuODkzLS4yNzU0Ljk1NS0uNjg1NXptMS4wODEgMS40MTZjLjUzNSAwIC43OTYtLjE5MTQuOTc2LS43Mjg1bC43MjEtMi4xNDA3aC0uNjAybC0uNDQ1IDEuNjM2OGgtLjAxbC0uNDQ1LTEuNjM2OGgtLjYyN2wuNzI4IDIuMDk1OGMuMDA0LjAwNzgtLjAxNy4wOTE4LS4wMTcuMDk5Ni0uMDM5LjE2Ni0uMTQzLjIzMjQtLjM1Mi4yMzI0LS4wMjEgMC0uMTI1IDAtLjE0Mi0uMDAzOXYuNDM5NGMuMDE3LjAwMzkuMTk1LjAwNTkuMjE1LjAwNTl6bTEuODY1LTIuMjUzOWMwIC4zMDg2LjIwMy41MTU2LjYuNjA1NWwuMzg3LjA4NTljLjE4Ny4wNDQ5LjI1OC4xMDM1LjI1OC4yMDkgMCAuMTM2Ny0uMTMxLjIyMjYtLjM0OC4yMjI2LS4yMjcgMC0uMzY1LS4xMDE1LS4zOTMtLjI3NzNoLS41NTZjLjAzMS40MDgyLjM3NS42Nzc3LjkzMy42Nzc3LjU1MyAwIC45MzItLjI3MTUuOTMyLS42ODM2IDAtLjMxMjUtLjE3LS40Nzg1LS41OS0uNTcyMmwtLjQtLjA4NmMtLjE4NC0uMDQyOS0uMjc0LS4xMTMzLS4yNzQtLjIxNjggMC0uMTM0Ny4xMjktLjIyNDYuMzI2LS4yMjQ2LjIxMSAwIC4zNDYuMTAzNS4zNTguMjcxNWguNTI1Yy0uMDA4LS40MDYyLS4zNDktLjY3MTktLjg3NS0uNjcxOS0uNTM3IDAtLjg4My4yNjE3LS44ODMuNjYwMnoiLz48cGF0aCBkPSJtNi41NjAwNiA0MGguNDcwMjFsLS43MzUzNS0yLjExMzhoLS41MjAwMmwtLjczMzg4IDIuMTEzOGguNDU0MWwuMTYxMTMtLjUxMjdoLjc0MjY4em0tLjUzNzYtMS43MDk1aC4wMTAyNWwuMjcxLjg2NTdoLS41NTIyNXptMS45ODgxOCAxLjc1NjRjLjUzMTc0IDAgLjg1NDAxLS40MjYzLjg1NDAxLTEuMTA4OXMtLjMyNTItMS4xMDAxLS44NTQwMS0xLjEwMDFjLS41Mjg4IDAtLjg1NTQ2LjQxODktLjg1NTQ2IDEuMTAxNiAwIC42ODQuMzIzNzMgMS4xMDc0Ljg1NTQ2IDEuMTA3NHptMC0uMzU0NWMtLjI1MTk1IDAtLjQwNTc2LS4yNzI1LS40MDU3Ni0uNzUyOSAwLS40NzYxLjE1Njc0LS43NDcxLjQwNTc2LS43NDcxLjI1MDQ5IDAgLjQwNDMuMjY5NS40MDQzLjc0NzEgMCAuNDgxOS0uMTUyMzQuNzUyOS0uNDA0My43NTI5eiIvPjxwYXRoIGQ9Im01LjEyNDUxIDQ3LjUyMnYuMDA3M2guNDEwMTZ2LS4wMDczYzAtLjE5NDkuMTUwODgtLjMzODQuMzU1OTUtLjMzODQuMTk2MjkgMCAuMzM1NDUuMTI2LjMzNTQ1LjI4NDIgMCAuMTQ2NS0uMDY1OTEuMjUzNC0uMjc5NzguNDY3M2wtLjc5Njg4Ljc2NzV2LjI5NzRoMS41MzY2M3YtLjM1MTZoLS45NTM2MnYtLjAwODhsLjUxNTYzLS40OTY1Yy4yMzI5MS0uMjMxNS40MDg2OS0uNDI5Mi40MDg2OS0uNjkyOSAwLS4zNTMtLjMwNjE1LS42MTA4LS43NTE0Ny0uNjEwOC0uNDYxNDIgMC0uNzgwNzYuMjgyNy0uNzgwNzYuNjgyNnptMi4zNzA1MSAxLjQ3OGguNDM3OTl2LTIuMTEzOGgtLjQzOTQ2bC0uNTQ2MzguMzc5NHYuMzk4NWwuNTM5MDYtLjM3MjFoLjAwODc5eiIvPjxwYXRoIGQ9Im0yMTAuMDAyIDQwLjAzNjZjLjUxOSAwIC44ODEtLjI5ODguOTMtLjc3MDVoLS40M2MtLjA0Ny4yNTA1LS4yMzYuNDA0My0uNDk4LjQwNDMtLjMzOSAwLS41NTEtLjI3ODMtLjU1MS0uNzI5NSAwLS40NDUzLjIxNS0uNzI1MS41NDktLjcyNTEuMjU4IDAgLjQ1Ny4xNjk5LjQ5OC40MjkyaC40MzFjLS4wMzQtLjQ3MzEtLjQyMS0uNzk1NC0uOTI5LS43OTU0LS42MTIgMC0xIC40MTE2LTEgMS4wOTI4IDAgLjY4MjYuMzg1IDEuMDk0MiAxIDEuMDk0MnptMi4wMTMuMDEwM2MuNTA5IDAgLjg1Ny0uMjUyLjg1Ny0uNjE4MiAwLS4yNzgzLS4yMDEtLjQ5MzYtLjQ5Ni0uNTQzNHYtLjAwODhjLjI0Ni0uMDU4Ni40MS0uMjQ3Ni40MS0uNDc3NiAwLS4zMjUyLS4zMTctLjU1OTUtLjc3MS0uNTU5NS0uNDUyIDAtLjc3Mi4yMzU4LS43NzIuNTU4MSAwIC4yMzI5LjE2Ni40MjE4LjQxMi40Nzl2LjAwODhjLS4yOTUuMDQ4My0uNDk3LjI2MzYtLjQ5Ny41NDE5IDAgLjM2NjMuMzQ1LjYxOTcuODU3LjYxOTd6bTAtLjMyMjNjLS4yMzMgMC0uMzk1LS4xMzkyLS4zOTUtLjMyOTZzLjE2Mi0uMzI5Ni4zOTUtLjMyOTYuMzk0LjEzOTIuMzk0LjMyOTYtLjE2MS4zMjk2LS4zOTQuMzI5NnptMC0uOTgxNGMtLjE5NiAwLS4zMzQtLjEyMzEtLjMzNC0uMjkxNSAwLS4xNjg1LjEzOC0uMjkzLjMzNC0uMjkzLjE5NSAwIC4zMzQuMTIzLjMzNC4yOTMgMCAuMTY4NC0uMTM5LjI5MTUtLjMzNC4yOTE1eiIvPjxwYXRoIGQ9Im0yMDguMzA3IDQ5aC40Mzh2LTIuMTEzOGgtLjQ0bC0uNTQ2LjM3OTR2LjM5ODVsLjUzOS0uMzcyMWguMDA5em0xLjc0Ni4wNDY5Yy41MzIgMCAuODU0LS40MjYzLjg1NC0xLjEwODlzLS4zMjUtMS4xMDAxLS44NTQtMS4xMDAxYy0uNTI4IDAtLjg1NS40MTg5LS44NTUgMS4xMDE2IDAgLjY4NC4zMjQgMS4xMDc0Ljg1NSAxLjEwNzR6bTAtLjM1NDVjLS4yNTIgMC0uNDA1LS4yNzI1LS40MDUtLjc1MjkgMC0uNDc2MS4xNTYtLjc0NzEuNDA1LS43NDcxLjI1MSAwIC40MDUuMjY5NS40MDUuNzQ3MSAwIC40ODE5LS4xNTMuNzUyOS0uNDA1Ljc1Mjl6bTEuOTYyLjM1NDVjLjUwOSAwIC44NTctLjI1Mi44NTctLjYxODIgMC0uMjc4My0uMjAxLS40OTM2LS40OTYtLjU0MzR2LS4wMDg4Yy4yNDYtLjA1ODYuNDEtLjI0NzYuNDEtLjQ3NzYgMC0uMzI1Mi0uMzE3LS41NTk1LS43NzEtLjU1OTUtLjQ1MiAwLS43NzIuMjM1OC0uNzcyLjU1ODEgMCAuMjMyOS4xNjYuNDIxOC40MTIuNDc5di4wMDg4Yy0uMjk1LjA0ODMtLjQ5Ny4yNjM2LS40OTcuNTQxOSAwIC4zNjYzLjM0NS42MTk3Ljg1Ny42MTk3em0wLS4zMjIzYy0uMjMzIDAtLjM5NS0uMTM5Mi0uMzk1LS4zMjk2cy4xNjItLjMyOTYuMzk1LS4zMjk2LjM5NC4xMzkyLjM5NC4zMjk2LS4xNjEuMzI5Ni0uMzk0LjMyOTZ6bTAtLjk4MTRjLS4xOTYgMC0uMzM0LS4xMjMxLS4zMzQtLjI5MTUgMC0uMTY4NS4xMzgtLjI5My4zMzQtLjI5My4xOTUgMCAuMzM0LjEyMy4zMzQuMjkzIDAgLjE2ODQtLjEzOS4yOTE1LS4zMzQuMjkxNXoiLz48L2c+PC9zdmc+" width="218" height="54"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="random-notes">Random Notes<a class="hash-link" href="#random-notes" title="Direct link to heading">​</a></h2><p>Let&#x27;s start simple and just play random notes by repeatedly picking a random
number between 21 and 108. This gives us a random distribution, where each of
the 88 notes have an equal chance of being played.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="random-numbers">Random Numbers<a class="hash-link" href="#random-numbers" title="Direct link to heading">​</a></h3><p>For this example, we&#x27;ll need a way to generate a random number within a given
range, which JS doesn&#x27;t have out-of-the-box, so let&#x27;s create one:</p><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">random</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">min</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// =&gt; a random number between 1 and 10</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="random-stream">Random Stream<a class="hash-link" href="#random-stream" title="Direct link to heading">​</a></h3><p>Before actually making any sounds, let&#x27;s just create a regular stream of random
numbers within our desired range. We just need to convert our random number
function to an Observable:</p><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> interval </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rxjs</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> map </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rxjs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">operators</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">random</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">min</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> numbers$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">108</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">numbers$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// =&gt; a random number between 21 and 108 every second</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="random-notes-1">Random Notes<a class="hash-link" href="#random-notes-1" title="Direct link to heading">​</a></h3><p>Now, let&#x27;s plug in the <code>sampler()</code> function from Tuplet and hear some notes:</p><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> interval </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rxjs</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> map </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rxjs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">operators</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> sampler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> samples </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tuplet</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">random</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">min</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// TODO: our piano samples only support this range, should be 21, 108</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> notes$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">107</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> context </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AudioContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> piano </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sampler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> samples</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">piano</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  notes$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">note</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">piano</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">note</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> duration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><p>Let&#x27;s refactor this using the <code>program()</code> structure from Tuplet:</p><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> interval </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rxjs</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> map </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rxjs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">operators</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> program</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sampler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> samples</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> random </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tuplet</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  note</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  piano</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">messages</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">model</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> send</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">note</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> notes$ </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">interval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">pipe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">108</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    notes$</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">note</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> note </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">piano</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> piano </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sampler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">model</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> samples</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">piano</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> piano </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> piano</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> note </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">piano</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">note</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> duration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">program</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> messages</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> render </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  program</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  sampler2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  sampleMap2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  metronome</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolution</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  random</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  noteName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> tuplet</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -- MODEL</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> model </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  bpm</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  tick</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  note</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  sampler</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -- MESSAGES</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">messages</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">model</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> send</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bpm </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> msgs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">tick</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> metro </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolution</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">metronome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> bpm</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      metro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">tick</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> tick</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">msgs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">note</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">note</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> rng </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">24</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">107</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> note</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">noteName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rng</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function-variable function" style="color:#d73a49">sampler</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> samples </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sampleMap2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;samples/piano&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> sampler</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sampler2</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> samples</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> msgs</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -- RENDER</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">render</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">model</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> sampler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> note </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> model</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">sampler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">note</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> duration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// -- PROGRAM</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">program</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> model</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> messages</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> render </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><p>This probably sounds like the bleeps and bloops you imagine when you hear the
phrase &quot;computer generated music&quot;. At strict intervals and constant velocity the
results sound rather mechanical.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="more-randomness">More randomness<a class="hash-link" href="#more-randomness" title="Direct link to heading">​</a></h2><p>By also applying some randomness to the timing and velocity, we can add more
nuance.</p><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> instrument</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> metronome</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> midi </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tuplet&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">rand</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">min</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> min</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">midi</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">output</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> metro </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">metronome</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inst </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">instrument</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> output</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metro </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Play a random note, at a random velocity, for a random length of time</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  metro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">onTick</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">inst</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">108</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">250</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  metro</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><p>This makes things feel more natural, emulating the variations of timing and
touch of a human player.</p><p>Whilst initially quite interesting though, pure randomness doesn&#x27;t hold our
attention for long, as, by definition, it lacks the patterns and structure that
are a key aspect of our enjoyment of music.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="relative-notes">Relative notes<a class="hash-link" href="#relative-notes" title="Direct link to heading">​</a></h2><p>If we think about taking a walk, even if we&#x27;re just wandering, we&#x27;re not taking
random steps and leaps. Our movements have direction, each step is related to
the previous ones to keep us moving along a certain path.</p><p>Rather than choosing randomly, we can pick our next note relative to the current
one.</p><div class="codeBlockContent_vqWU"><button type="button" class="runButton_XKxa">Run</button><div class="prism-code language-js codeBlock_wPnj"><div class="codeBlockLines_fQUY" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">navigator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">requestMIDIAccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">midi</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> outputs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> midi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">outputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">values</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> output </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> outputs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">min</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    min </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">ceil</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">min</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    max </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">floor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> min </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> min</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">playNote</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">note</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> length</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> velocity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> noteOn </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x90</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 144 = channel 1 note on</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> noteOff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x80</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 128 = channel 1 note off</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">noteOn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> note</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> velocity</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    output</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">noteOff</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> note</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> velocity</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">performance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> startNote </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">108</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> startVelocity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> step </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">note</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> velocity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextNote </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">note </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">21</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">note </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">108</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> nextVelocity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">velocity </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">min</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">velocity </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> step</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">127</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> timer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">playNote</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextNote</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextVelocity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">clearTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">nextNote</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> nextVelocity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">play</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">startNote</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> startVelocity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div></div></div></div><p>This gives us something that has more of a flow and sense of direction. We&#x27;ve
constrained the options from all possible notes, to just those that are 5 notes
(a 5th) either up or down from the current note. This gives us some control, but
we&#x27;re still very much at the whim of chaos to determine our path.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="further-reading">Further Reading<a class="hash-link" href="#further-reading" title="Direct link to heading">​</a></h2><ul><li><a href="https://en.wikipedia.org/wiki/Aleatoric_music" target="_blank" rel="noopener noreferrer">Aleatoric music - Wikipedia</a></li><li><a href="https://medium.com/@metalex9/randomizing-program-execution-with-random-number-generators-a7bb613861f9" target="_blank" rel="noopener noreferrer">Randomizing Program Execution with Random Number Generators – Alex Bainter</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/generative-music-with-javascript/generative/repetition"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Repetition</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/generative-music-with-javascript/generative/probability"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Probability</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#random-walk" class="table-of-contents__link toc-highlight">Random Walk</a></li><li><a href="#random-notes" class="table-of-contents__link toc-highlight">Random Notes</a><ul><li><a href="#random-numbers" class="table-of-contents__link toc-highlight">Random Numbers</a></li><li><a href="#random-stream" class="table-of-contents__link toc-highlight">Random Stream</a></li><li><a href="#random-notes-1" class="table-of-contents__link toc-highlight">Random Notes</a></li></ul></li><li><a href="#more-randomness" class="table-of-contents__link toc-highlight">More randomness</a></li><li><a href="#relative-notes" class="table-of-contents__link toc-highlight">Relative notes</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/generative-music-with-javascript/assets/js/runtime~main.83b3d8a9.js"></script>
<script src="/generative-music-with-javascript/assets/js/main.08b23e21.js"></script>
</body>
</html>